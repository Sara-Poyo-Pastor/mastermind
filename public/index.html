<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Mastermind - Cliente</title>
    <style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    }

    body {
    font-family: 'Roboto', sans-serif;
    background-color: #f5f5f5;
    color: #333;
    line-height: 1.6;
    }

    .container {
    max-width: 800px;
    margin: 2rem auto;
    background: #fff;
    padding: 2rem;
    border-radius: 8px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    h1, h2 {
    text-align: center;
    margin-bottom: 1rem;
    color: #222;
    }

    section {
    margin-bottom: 2rem;
    }


    input[type="text"],
    input[type="number"],
    button {
    width: 100%;
    padding: 0.75rem;
    margin: 0.5rem 0;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 1rem;
    }

    button {
    background-color: #AFDDE4;
    color: #000000;
    border: none;
    cursor: pointer;
    transition: background-color 0.3s ease;
    }

    button:hover {
    background-color: #746E98;
    color: #fff;
    }


    .result {
    background: #e9ecef;
    border-left: 4px solid #746E98;
    padding: 1rem;
    margin-top: 0.5rem;
    font-family: 'Courier New', monospace;
    white-space: pre-wrap;
    }

  
    @media (max-width: 600px) {
    .container {
        padding: 1rem;
    }
}

  </style>
</head>
<body>
  <div class="container">
    <h1>Cliente Mastermind</h1>

    <section id="create-game">
      <h2>Crear Partida</h2>
      <input type="text" id="game-name" placeholder="Nombre de la partida">
      <button onclick="createGame()">Crear Partida</button>
      <div id="create-game-result" class="result"></div>
    </section>

    <section id="list-games">
      <h2>Listar Partidas</h2>
      <button onclick="listGames()">Listar Partidas</button>
      <div id="games-list" class="result"></div>
    </section>

    <section id="game-details">
      <h2>Detalles de una Partida</h2>
      <input type="number" id="game-id" placeholder="ID de la partida">
      <button onclick="showGame()">Mostrar Partida</button>
      <div id="game-detail-result" class="result"></div>
    </section>

    <section id="play-move">
      <h2>Enviar Movimiento</h2>
      <input type="number" id="play-game-id" placeholder="ID de la partida">
      <input type="text" id="move-code" placeholder="CÃ³digo (ej. rojo, azul, verde, amarillo)">
      <button onclick="playMove()">Enviar Movimiento</button>
      <div id="play-move-result" class="result"></div>
    </section>
  </div>

  <script>
    const baseUrl = 'http://127.0.0.1:8000/api';

    function createGame() {
      const name = document.getElementById('game-name').value || 'Unnamed Game';
      fetch(`${baseUrl}/games`, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({ name })
      })
      .then(res => res.json())
      .then(data => {
        document.getElementById('create-game-result').innerText = JSON.stringify(data, null, 2);
      })
      .catch(err => console.error(err));
    }

    function listGames() {
      fetch(`${baseUrl}/games`)
        .then(res => res.json())
        .then(data => {
          document.getElementById('games-list').innerText = JSON.stringify(data, null, 2);
        })
        .catch(err => console.error(err));
    }

    function showGame() {
      const gameId = document.getElementById('game-id').value;
      fetch(`${baseUrl}/games/${gameId}`)
        .then(res => res.json())
        .then(data => {
          document.getElementById('game-detail-result').innerText = JSON.stringify(data, null, 2);
        })
        .catch(err => console.error(err));
    }

    function playMove() {
      const gameId = document.getElementById('play-game-id').value;
      const moveCodeInput = document.getElementById('move-code').value;
      // Suponemos que el usuario ingresa los colores separados por comas
      const code = moveCodeInput.split(',').map(c => c.trim());
      fetch(`${baseUrl}/games/${gameId}/move`, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({ code })
      })
      .then(res => res.json().then(data => ({ status: res.status, data })))
      .then(result => {
        document.getElementById('play-move-result').innerText = JSON.stringify(result.data, null, 2) + ` (Status: ${result.status})`;
      })
      .catch(err => console.error(err));
    }
  </script>
</body>
</html>
